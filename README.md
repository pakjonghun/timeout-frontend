# 초과근무 프로젝트 프론트앤드

## 개요

- 이름 : 초과근무 관리
- 목적 : 사용자와 관리자가 사내 초과근무를 편하게 기록 및 관리하게 하기위함
- 사용기술 : react, redux, tailwind, socket.io-client 등등
- 기능
  - 일반 사용자 : 회원가입, 로그인, 인증, 초과근무 시작, 종료, 기록, 검색
  - 관리자 : 초과근무 내용 수정, 초과근무 현황 실시간 확인, 공지사항 작성 전파

## 어려운점

- 기획
  - 사용자의 역할 에 따른 권한부여 범위(매니저, 클라이언트)
    - 실제로 서비스를 운영 해 본 후에 조정 이 필요
    - 매니저는 최대한 클라이언트와 소통 후 클라이언트 정보를 수정 하 하도록 공지
  - admin 기능 보완 필요 : 데이터가 많이 쌓인 후 본격적으로 필요한 어드민 기능 도출 필요
  - 개인 pc 외 개인 휴대폰으로 사용 가능 하도록 보완 필요
    - 사내 wifi 접속 되 있는지(위치확인) 등 기능 추가 필요
    - 다양한 휴대폰 사이즈에 맞춘 화면 사이즈 적용 필요
  - 초과근무 시간을 확인하는 관리자의 권한을 추가할 필요가 있는지? 실제로 사용 해 본 후에 도출 필요
- 코드 작성
  - redux thunk 와 redux rtk 중 무엇을 사용 할 것인지 고민
    - rtk
      - 한 페이지에 여러개의 통신이 필요할 경우 rtk 는 오히려 불편한 점이 있음
      - 캐슁이 알아서 되고 캐슁 부분 무효화 등 다양한 기능이 있어서 편한 점도 있음
    - thunk 나 saga
      - 캐슁을 위한 별도의 툴이나 작업이 필요
      - redux-toolkit이 11 mb 나 되는데 또 다른 툴 설치가 불필요 하다는 생각을 함
      - 때문에 thunk saga 는 사용하지 않음
      - 번외로 차라리 recoil 이 더 낫지 않나? 하는 고민도 했으나
      - 그래도 많이 사용고, 기능도 많은 redux 를 사용 하기로함
    - 현재 구현방식
      - rtk 를 사용하되 한 페이지에 같은 데이터를 계속 통신해야 할 경우
      - 그 데이터를 여러 형태로 바꿔서 화면에 출력해야 할 경우
      - 위 두 경우에 별도의 저장소를 또 만들어서 rtk service 코드내에서 태그 무효화
      - 태그 무효화로 잘 안될때에는 queryFn 방법으로 작성
  - create-react-app 을 사용하지 않음
    - react 작동 방식을 이해를 하려는 학습 목적
    - cra 로 만든 프로젝트 보다 용량이 적고 불필요한 툴을 사용하지 않은 것 같아서 좋았으나
    - 설정 하는데 시간이 많이 소요되서 특별히 webpack 을 커스텀 할 일이 없으면
    - cra 를 쓰는게 프로젝트 작성 속도면에서 낫겠다는 생각을 하게됨

## 아바타 이미지

- lamda 함수를 이용해서 이미지 사이즈를 재조정해서 다시 업로드함
- 아바타 이미지는
  1. preview 가 있으면 preview 를 출력(업로드 할 이미지)
  2. 오리지날 이미지(리사이징 전)와 리사이징 이미지 url 이 둘다 있으면
  - 리사이징을 메인 src로, 오리지날을 onError 시 대체 이미지로 출력
  3. 오리지날 이미지, 리사이징 이미지 중 하나라도 없으면
  - gravatar retro 타입의 이미지를 출력

## 배포

- aws ec2 를 통한 배포
- ec2 에 백엔드와 프론트 둘다 위치 시켜서 프론트 백 접근이 빠르고 용이함
- 동일 vpc 내 rds 도 위치 시켜서 백 db 간 접근이 빠르도록 함
