# 초과근무 프로젝트 프론트앤드
- Backend 저장소는 [링크](https://github.com/pakjonghun/timeout-backend) 입니다

- 엑셀로 직원의 초과근무를 관리하는게 너무 힘들다
- 초과근무를 관리해 주는 웹사이트가 있으면 어떨까?
- 이 초과근무 관리 프로젝트는 인사업무를 하는 친구의 위와 같은 하소연을 듣고 만들어 보았습니다.

## 개요

- 이름 : 초과근무 관리
- 목적 : 사용자와 관리자가 초과근무를 편하게 기록 및 관리하게 하기위함
- 사용기술 : react, redux, tailwind, socket.io-client 등등
- 기능
  - 일반 사용자 : 회원가입, 로그인, 인증, 초과근무 시작, 종료, 기록, 검색
  - 관리자 : 초과근무 내용 수정, 초과근무 현황 실시간 확인, 공지사항 작성 전파
  - 특징
    - 실시간 관리
      - 관리자는 일반사용자에게 실시간으로 공지사항 메세지를 보낼 수 있음
      - 관리자는 오늘 초과근무 진행 현황을 실시간으로 확인 할 수 있음
      - 관리자는 누가 로그인을 했고, 누가 초과근무를 시작했고 종료했는지 실시간으로 알 수 있음
      - 사용자는 본인의 근무기록이 변경되었을 시 실시간으로 알람을 받아볼 수 있음
    - 손쉬운 편집 : 관리자가 기록을 날짜와 사용자 이름으로 검색해서 수정 할 수 있음
    - 쉬운 데이터 정렬 : 거의 모든 column 으로 정렬이 가능함
    - 서버와 동기화 : 컴퓨터를 옮겨도 기록이 유지되며, 로그아웃 후 다시 접속해도 기록이 유지됨

## 개선이 필요한 사항

- 기획
  - 사용자의 역할 에 따른 권한부여 범위(매니저, 클라이언트)
    - 실제로 서비스를 운영 해 본 후에 조정 이 필요
    - 매니저는 최대한 클라이언트와 소통 후 클라이언트 정보를 수정 하 하도록 공지
  - admin 기능 보완 필요 : 데이터가 많이 쌓인 후 본격적으로 필요한 어드민 기능 도출 필요
  - 개인 pc 외 개인 휴대폰으로 사용 가능 하도록 보완 필요
    - 사내 wifi 접속 되 있는지(위치확인) 등 기능 추가 필요
    - 다양한 휴대폰 사이즈에 맞춘 화면 사이즈 적용 필요
  - 초과근무 시간을 확인하는 관리자의 권한을 추가할 필요가 있는지? 실제로 사용 해 본 후에 도출 필요
- 코드 작성
  - redux thunk 와 redux rtk 중 무엇을 사용 할 것인지 고민
    - rtk
      - 한 페이지에 여러개의 통신이 필요할 경우 rtk 는 오히려 불편한 점이 있음
      - 캐슁이 알아서 되고 캐슁 부분 무효화 등 다양한 기능이 있어서 편한 점도 있음
    - thunk 나 saga
      - 캐슁을 위한 별도의 툴이나 작업이 필요
      - redux-toolkit이 11 mb 나 되는데 또 다른 툴 설치가 불필요 하다는 생각을 함
      - 때문에 thunk saga 는 사용하지 않음
      - 번외로 차라리 recoil 이 더 낫지 않나? 하는 고민도 했으나
      - 그래도 많이 사용고, 기능도 많은 redux 를 사용 하기로함
    - 현재 구현방식
      - rtk 를 사용하되 한 페이지에 같은 데이터를 계속 통신해야 할 경우
      - 그 데이터를 여러 형태로 바꿔서 화면에 출력해야 할 경우
      - 위 두 경우에 별도의 저장소를 또 만들어서 rtk service 코드내에서 태그 무효화
      - 태그 무효화로 잘 안될때에는 queryFn 방법으로 작성

## 아바타 이미지

- lamda 함수를 이용해서 이미지 사이즈를 재조정해서 다시 업로드함
- 아바타 이미지는
  1. preview 가 있으면 preview 를 출력(업로드 할 이미지)
  2. 오리지날 이미지(리사이징 전)와 리사이징 이미지 url 이 둘다 있으면
  - 리사이징을 메인 src로, 오리지날을 onError 시 대체 이미지로 출력
  3. 오리지날 이미지, 리사이징 이미지 중 하나라도 없으면
  - gravatar retro 타입의 이미지를 출력

## 배포

- aws ec2 를 통한 배포
- ec2 rds 시간을 모두 한국(서울)시간대로 통일 하여 시간 정확도를 높임
- 같은 vpc 같은 ec2 에 백엔드와 프론트 둘다 위치 시켜서 프론트 백 접근이 빠르고 용이함
- 동일 vpc 내 rds 도 위치 시켜서 백 db 간 접근이 빠르도록 함
